function Slider(a){this.init(a)}$.extend(Slider.prototype,{init:function(a){this.options=$.extend({},{conversion:.375,current:1,speed:300},a),this.$wraper=$("#sliderWrapper"),this.$slider=$("#sliderContent"),this.$control=$("#sliderControl"),this.$items=this.$slider.find(".slider-item"),this.length=this.$items.size(),this.setWraperSize(),this.render()},render:function(){var a=this,b=(a.options,"");$.each(a.$items,function(a){b+="<em></em>"}),a.$control.html(b);var c=a.$items.first().clone(),d=a.$items.last().clone();a.$items.first().before(d.addClass("duplicate")),a.$slider.append(c.addClass("duplicate")),a.bindEvents()},bindEvents:function(){var a=this,b=a.options;a.setCurrent(),a.setSliderTransform(-(a.screenWidth*b.current)),$(window).resize(function(){a.setWraperSize(),a.setSliderTransform(-(a.screenWidth*b.current))}),a.$wraper.on("touchstart",function(b){a.touchstart(b)}),a.$wraper.on("touchmove",function(b){a.touchmove(b)}),a.$wraper.on("touchend",function(){a.touchend()}),a.auto(),a.$wraper.removeClass("slider-wraper-loading")},touchstart:function(a){var b=a.originalEvent.touches;if(b&&b.length){var c=b[0];this.touchStartX=c.pageX,this.touchMoveX=c.pageX,this.setSliderTransition(0),this.setSliderTransform(-(this.screenWidth*this.options.current)),this.touchTime=new Date,this.positionX=this.getSliderTransform(),this.autoStop()}},touchmove:function(a){"touchmove"===a.type&&a.preventDefault();var b=a.originalEvent.touches;if(b&&b.length){var c=b[0];if(this.touchMoveX=c.pageX,!this.scrolling){var d=this.touchMoveX-this.touchStartX;this.setSliderTransform(d+this.positionX)}}},touchend:function(){var a=this.options,b=this.touchMoveX-this.touchStartX,c=a.current,d=new Date,e=b>25,f=-25>b,g=Math.abs(b)||0;return 30>g&&d-this.touchTime<100?void this.auto():(e?this.isFirst?(this.setCurrent(this.length),c=0):this.setCurrent(c-=1):f&&(this.isLast?(this.setCurrent(1),c+=1):this.setCurrent(c+=1)),this.setSliderTransition(a.speed),this.setSliderTransform(-(this.screenWidth*c)),this.scrollEnd(),void this.auto())},scrollEnd:function(){var a=this;a.scrolling=!0,window.clearTimeout(a.scrollingTimer),a.scrollingTimer=window.setTimeout(function(){a.scrolling=!1,a.setSliderTransition(0),a.setSliderTransform(-(a.screenWidth*a.options.current))},this.options.speed)},setSliderTransition:function(a){var b=this.$slider.get(0).style;b.webkitTransitionDuration=a/1e3+"s"},setSliderTransform:function(a,b,c){var d=this.$slider.get(0).style,a=a||0,b=b||0,c=c||0;d.webkitTransform="translate3d("+a+"px, "+b+"px, "+c+"px)"},getSliderTransform:function(){var a=this.$slider.get(0).style,b=new WebKitCSSMatrix(a.webkitTransform);return b.m41},setCurrent:function(a){var b=this.options,a=void 0===a?b.current:a;b.current=a,this.isFirst=b.current<=1?!0:!1,this.isLast=b.current>=this.length?!0:!1,this.$control.find("em").eq(b.current-1).addClass("current").siblings().removeClass("current")},setWraperSize:function(){this.options.conversion&&(this.screenWidth=$(window).width(),this.$wraper.css({width:this.screenWidth,height:this.screenWidth*this.options.conversion}))},next:function(){var a=this,b=this.options,c=b.current;this.isLast?(this.setCurrent(1),c+=1):this.setCurrent(c+=1),a.setSliderTransition(b.speed),a.setSliderTransform(-(a.screenWidth*c)),a.scrollEnd()},auto:function(){var a=this;a.length<=0||(a.autoStop(),a.timer=window.setTimeout(function(){a.auto(),a.next()},4e3))},autoStop:function(){window.clearTimeout(this.timer)}});